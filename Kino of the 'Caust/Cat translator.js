// translator.js - Vietnamese Translation for WWII Movie Categories

const translations = {
    en: {
        // Navigation
        "Search movies...": "Search movies...",
        "Letter from the host": "Letter from the host",
        "Nazi Germany": "Nazi Germany",
        "Empire of Japan": "Empire of Japan",
        "Fascist Italy": "Fascist Italy",
        "Allied Factions": "Allied Factions",
        "Log In / Sign Up": "Log In / Sign Up",
        "Log In": "Log In",
        "Sign Up": "Sign Up",

        // Section Headers
        "Nazi Germany": "Nazi Germany",
        "Empire of Japan": "Empire of Japan",
        "Fascist Italy": "Fascist Italy",
        "Allied Faction": "Allied Faction",
        // Movie Titles
        "Schindler's List (1993)": "Schindler's List (1993)",
        "The Pianist (2002)": "The Pianist (2002)",
        "Downfall (2004)": "Downfall (2004)",
        "Men Behind the BlackSun (1988)": "Men Behind the BlackSun (1988)",
        "The City of Life and Death (2009)": "The City of Life and Death (2009)",
        "Vợ Nhặt (2023)": "Vợ Nhặt (2023)",
        "Life is Beautiful (1997)": "Life is Beautiful (1997)",
        "Rome, Open City (1945)": "Rome, Open City (1945)",
        "The Garden of the Finzi-Continis (1970)": "The Garden of the Finzi-Continis (1970)",
        "Hiroshima (1953)": "Hiroshima (1953)",
        "Grave of the Fireflies (1988)": "Grave of the Fireflies (1988)",
        "Letters from Iwo Jima (2006)": "Letters from Iwo Jima (2006)",

        // Movie Descriptions
        "Heroic efforts of a businessman to keep the fire of conscience burning.": "Heroic efforts of a businessman to keep the fire of conscience burning.",
        "The will to live of an ordinary man in cruel fate.": "The will to live of an ordinary man in cruel fate.",
        "The last days of the painter who recreated the European map.": "The last days of the painter who recreated the European map.",
        "Gruesome depiction of Unit 731's experiments.": "Gruesome depiction of Unit 731's experiments.",
        "A harrowing illustration of the Nanking Massacre.": "A harrowing illustration of the Nanking Massacre.",
        "A piece of lost sketch talking about tragic fates in the Great Famine of Vietnam in 1945, adapted from the same name novel (1962)": "A piece of lost sketch talking about tragic fates in the Great Famine of Vietnam in 1945, adapted from the same name novel (1962)",
        "The greatest white lie of fatherhood.": "The greatest white lie of fatherhood.",
        "The hunt for the Resistance, the salvation from the Church.": "The hunt for the Resistance, the salvation from the Church.",
        "Even the wealth couldn't save the tragic fates.": "Even the wealth couldn't save the tragic fates.",
        "The day that the bomb dropped and changed the world.": "The day that the bomb dropped and changed the world.",
        "The devastating human cost of war, under the children's perspective.": "The devastating human cost of war, under the children's perspective.",
        "Perspectives from the conscripts of the Empire of the Rising Sun.": "Perspectives from the conscripts of the Empire of the Rising Sun.",

        // Footer
        "© 2025 Kino of the 'Caust. All Rights Reserved.": "© 2025 Kino of the 'Caust. All Rights Reserved."
    },
    vi: {
        // Navigation
        "Search movies...": "Tìm kiếm phim...",
        "Letter from the host": "Thư từ chủ nhà",
        "Nazi Germany": "Đức Quốc Xã",
        "Empire of Japan": "Đế quốc Nhật Bản",
        "Fascist Italy": "Phát xít Ý",
        "Allied Factions": "Khối Đồng Minh",
        "Log In / Sign Up": "Đăng Nhập / Đăng Ký",
        "Log In": "Đăng Nhập",
        "Sign Up": "Đăng Ký",

        // Section Headers
        "Nazi Germany": "Đức Quốc Xã",
        "Empire of Japan": "Đế Quốc Nhật Bản",
        "Fascist Italy": "Phát Xít Ý",
        "Allied Faction": "Khối Đồng Minh",

        // Movie Titles (kept same as they're proper names)
        "Schindler's List (1993)": "Bản Danh Sách Của Schindler (1993)",
        "The Pianist (2002)": "Nghệ Sĩ Dương Cầm (2002)",
        "Downfall (2004)": "Sự Sụp Đổ (2004)",
        "Men Behind the BlackSun (1988)": "Những Kẻ Đứng Sau Mặt Trời Đen (1988)",
        "The City of Life and Death (2009)": "Thành Phố Sống Chết (2009)",
        "Vợ Nhặt (2023)": "Vợ Nhặt (2023)",
        "Life is Beautiful (1997)": "Cuộc Sống Tươi Đẹp (1997)",
        "Rome, Open City (1945)": "Rome, Thành Phố Mở (1945)",
        "The Garden of the Finzi-Continis (1970)": "Khu Vườn Của Gia Đình Finzi-Continis (1970)",
        "Hiroshima (1953)": "Hiroshima (1953)",
        "Grave of the Fireflies (1988)": "Mộ Đom Đóm (1988)",
        "Letters from Iwo Jima (2006)": "Những Lá Thư Từ Iwo Jima (2006)",

        // Movie Descriptions
        "Heroic efforts of a businessman to keep the fire of conscience burning.": "Nỗ lực anh hùng của một doanh nhân để giữ ngọn lửa lương tâm.",
        "The will to live of an ordinary man in cruel fate.": "Ý chí sinh tồn của một người đàn ông bình thường trước số phận nghiệt ngã.",
        "The last days of the painter who recreated the European map.": "Những ngày cuối cùng của người họa sĩ tái tạo bản đồ châu Âu.",
        "Gruesome depiction of Unit 731's experiments.": "Miêu tả ghê rợn về các thí nghiệm của Đơn vị 731.",
        "A harrowing illustration of the Nanking Massacre.": "Minh họa đau lòng về vụ thảm sát Nam Kinh.",
        "A piece of lost sketch talking about tragic fates in the Great Famine of Vietnam in 1945, adapted from the same name novel (1962)": "Một mảnh phác thảo bị lãng quên kể về số phận bi thảm trong nạn đói năm 1945 ở Việt Nam, chuyển thể từ tiểu thuyết cùng tên (1962)",
        "The greatest white lie of fatherhood.": "Lời nói dối vĩ đại nhất của tình phụ tử.",
        "The hunt for the Resistance, the salvation from the Church.": "Cuộc săn lùng phe Kháng chiến, sự cứu rỗi từ Nhà thờ.",
        "Even the wealth couldn't save the tragic fates.": "Ngay cả sự giàu có cũng không thể cứu những số phận bi thảm.",
        "The day that the bomb dropped and changed the world.": "Ngày quả bom rơi xuống và thay đổi thế giới.",
        "The devastating human cost of war, under the children's perspective.": "Cái giá khủng khiếp của chiến tranh qua góc nhìn trẻ thơ.",
        "Perspectives from the conscripts of the Empire of the Rising Sun.": "Góc nhìn từ những người lính bắt buộc của Đế quốc Mặt Trời Mọc.",

        // Footer
        "© 2025 Kino of the 'Caust. All Rights Reserved.": "© 2025 Kino of the 'Caust. Đã đăng ký bản quyền."
    }
};

// Improved translation function
function translateTextContent(element, language) {
    if (!element || !element.textContent) return;

    const text = element.textContent.trim();
    if (translations[language] && translations[language][text]) {
        element.textContent = translations[language][text];
    } else {
        // Reverse translation check
        const otherLang = language === 'en' ? 'vi' : 'en';
        if (translations[otherLang] && Object.values(translations[otherLang]).includes(text)) {
            const originalKey = Object.keys(translations[otherLang]).find(key => translations[otherLang][key] === text);
            if (translations[language] && translations[language][originalKey]) {
                element.textContent = translations[language][originalKey];
            }
        }
    }

    // Special handling for input placeholders
    if (element.placeholder && translations[language] && translations[language][element.placeholder]) {
        element.placeholder = translations[language][element.placeholder];
    }
}

// Translate the entire page
function translatePage(language) {
    // Save preference
    localStorage.setItem('preferredLanguage', language);

    // Translate navigation
    document.querySelectorAll('nav a, nav span, nav button, nav input').forEach(el => translateTextContent(el, language));

    // Translate movie sections
    document.querySelectorAll('.card h3, .card p').forEach(el => translateTextContent(el, language));

    // Translate footer
    const footer = document.querySelector('footer p');
    if (footer) translateTextContent(footer, language);

    // Update language selector
    const langSelect = document.getElementById('languageSelect');
    if (langSelect) langSelect.value = language;
}

// Initialize translator
function initTranslator() {
    const langSelect = document.getElementById('languageSelect');
    if (!langSelect) return;

    // Set initial language
    const defaultLang = localStorage.getItem('preferredLanguage') || 'en';
    translatePage(defaultLang);
    langSelect.value = defaultLang;

    // Event listener
    langSelect.addEventListener('change', () => translatePage(langSelect.value));
}

// Start when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTranslator);
} else {
    initTranslator();
}